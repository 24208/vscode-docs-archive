---
Order: 40
TOCTitle: January 2019
PageTitle: Visual Studio Code January 2019
MetaDescription: See what is new in the Visual Studio Code January 2019 Release (1.31)
MetaSocialImage: 1_31/release-highlights.png
Date: 2019-02-06
DownloadVersion: 1.31.0
---
# January 2019 (version 1.31)

<!-- DOWNLOAD_LINKS_PLACEHOLDER -->

## Insiders release

Welcome to the Insiders build. These are the preliminary notes for the January 1.31 release of Visual Studio Code. As we get closer to the release date, you'll see details below about new features and important fixes.

Until the January release notes are available, you can still track our progress:

* **[January Iteration Plan](https://github.com/Microsoft/vscode/issues/65570)** - See what's planned for the milestone.
* **[Commit Log](https://github.com/Microsoft/vscode/commits/master)** - GitHub commits to the vscode open-source repository.
* **[Closed issues](https://github.com/Microsoft/vscode/milestone/83?closed=1)** - Resolved bugs and implemented feature requests in the January milestone.

We really appreciate people taking a look at our new features as soon as they are ready so check back here often and learn what's new to try out.

If you find issues or have suggestions, you can enter them in the VS Code repository on [GitHub](https://github.com/Microsoft/vscode/issues).

## Workbench

### Explorer uses the new tree

We have adopted our new tree widget in the Explorer. Because of that the Explorer now supports new tree features, click here for more details.

### Cut command in explorer context menu

We have added the cut command to the explorer context menu.

![Cut](images/1_31/cut.png)


### Closing order of editor tabs

A new setting `workbench.editor.focusRecentEditorAfterClose` allows you to change the order in which editor tabs are closed. By default, tabs will close in most recently used (MRU) order. Changing this setting allows closing tabs from right to left instead.

### Updated Go menu

We added more entries to the **Go** menu and put separators to group actions logically:

![Go Menu](images/1_31/go-menu.png)

### New title variables

There are three new variables that can be used within the `window.title` setting:

* `${activeFolderShort}`: The name of the folder the file is contained in.
* `${activeFolderMedium}`: The path of the folder the file is contained in, relative to the workspace folder.
* `${activeFolderLong}`: The full path of the folder the file is contained in.

### Problems panel

**Multi-line messages**

The Problems panel now shows multi-line messages in separate lines.

![Problems panel multi-line messages](images/1_31/problems-multi-line.gif)

You can also toggle to show or hide the complete message.

**Trigger Code actions using keyboard shortcut**

You can now trigger code actions from Problems panel using the same default keyboard shortcut `kb(editor.action.quickFix)` as Quick fix command.

### Output Panel

Smart scrolling behaviour in Output panel is made more efficient now. Scrolling is locked when you click anywhere in the output panel and gets unlocked when you click in the last line.

### Zen Mode hides line numbers

Turning on zen mode will now also hide editor line numbers. This behavior can be controlled via `zenMode.hideLineNumbers` setting.

## Editor

### Smart Selections

We have worked on the implementation of "Grow Selection" and "Shrink Selection". For once, we are in the process of adding API so that language servers can tell us what to select but the default implementation got smarter too.

![](images/1_31/smart-select-demo.gif)

Stay tuned - there is more to come as smart select is overhauled. Use the [`smart-select`](https://github.com/Microsoft/vscode/issues?q=is%3Aopen+is%3Aissue+label%3Asmart-select)-label to see what we are working on.

### Snippets

When authoring snippets with long descriptions you would be forced to write a long single string. No support for using and array as you can do it for `body`. This has no changed and long descriptions can be written using string arrays.

```json
{
  "prefix": "happy",
    "body": "#Happy Coding!",
    "description": [
      "First Line",
      "Second Line",
      "Third Line"
    ]
}
```

### References History

There is now a "Show History"-command for the references viewlet. It brings up quick pick with previous search allowing speedy re-runs of previous searches.

![Reference Search History](images/1_31/ref-history.png)


### Reference Code Lens

When selecting a reference code lens then a peek editor opens. This can now be controled with the `references.preferredLocation`-setting. Its options are `peek` and `view` - the latter shows references in the new viewlet.

## Languages

### TypeScript 3.3

<!-- TODO mjbvz -->

### Removing the markdown.previewFrontMatter setting

The `markdown.previewFrontMatter` setting has been removed. The Markdown preview now always hides YAML frontmatter (this was the default setting for `markdown.previewFrontMatter`).

Markdown extensions such as [Markdown yaml Preamble](https://marketplace.visualstudio.com/items?itemName=bierner.markdown-yaml-preamble) and [GitHub Markdown Preview](https://marketplace.visualstudio.com/items?itemName=bierner.github-markdown-preview) render frontmatter as a table in the preview.

## Integrated terminal

### Reflow support

The terminal will now wrap and unwrap lines when it is resized horizontally.

![Text reflowing in the terminal](images/1_31/terminal-reflow.gif)

### ConPTY support on Windows

Managing terminal processes via the Windows [ConPTY API](https://blogs.msdn.microsoft.com/commandline/2018/08/02/windows-command-line-introducing-the-windows-pseudo-console-conpty/) is now available as an opt-in option in the Windows Insiders fast ring (build number 18309+).

```json
{
  "terminal.integrated.windowsEnableConpty": true
}
```

This will use the ConPTY system provided by the Windows Console team as the backend for the terminal. Enabling this should fix many issues with the Windows terminal, particularly around color support, interactive applications and shells that natively support VT sequences.

Here's a before and after of 256 ANSI color support in a WSL terminal:

![256 colors without ConPTY don't work](images/1_31/terminal-conpty-before.png)
![256 colors with ConPTY do work](images/1_31/terminal-conpty-after.png)

### New buffer implementation enabled

The TypedArray/ArrayBuffer-based terminal buffer [introduced in v1.29](https://code.visualstudio.com/updates/v1_29#_experimental-buffer-improvements) is now turn on and the old implementation has been removed, this should provide a good boost to throughput in the terminal as well as significantly reduce its memory footprint.

### Current working directory used for links

On Linux and macOS the terminal will now resolve links relative to the current working directory, not the initial directory of the terminal.

![After cding into a directory links relative to that path will work](images/1_31/terminal-reflow.gif)

### Find in terminal improvements

Find in the terminal now supports incremental "find-as-you-type" searching, as well as the ability to find multiple terms on a single line.

### Improvements to commandsToSkipShell setting

Previously the setting `terminal.integrated.commandsToSkipShell` was a list of all commands that would skip evaluation by the terminal and be handled by VS Code instead, this was unintuitive because you would need a list of 100+ commands in your settings file to change it. This has changes to be a list of additions and deletions, so you only include the changes to the default list:

```json
{
  "terminal.integrated.commandsToSkipShell": [
    // Make ctrl+n open a new file when the terminal is focused
    "workbench.action.files.newUntitledFile",
    // Send ctrl+e to the terminal
    "-workbench.action.quickOpen"
  ]
}
```

## Debug and tasks

### Command-based user input variable

The [input variables](https://code.visualstudio.com/updates/v1_30#_improved-user-input-variables-for-task-and-debug-configurations) introduced last milestone are a powerful mechanism to ask for user input in tasks or debug configurations. Initially, we made `promptString` and `pickString` input variables available.

In this milestone, we are introducing a new type of input variable `command` which runs an arbitrary command when an input variable is interpolated. Since commands can be contributed by extensions, it is now possible to extend user input variables by new implementations.

The following example shows how to use a user input variable of type `command` in a debug configuration that lets the user pick a test case from a list of all test cases found in a specific folder. It is assumed that some extension provides an `extension.mochaSupport.testPicker` command that locates all test cases in a configurable location and shows a picker UI to pick one of them.

```json
{
   "configurations": [
      {
         "type": "node",
         "request": "launch",
         "name": "Launch Test",
         "program": "${workspaceFolder}/${input:pickTest}"
      }
   ],
   "inputs": [
      {
         "id": "pickTest",
         "type": "command",
         "command": "extension.mochaSupport.testPicker",
         "args": {
            "testFolder": "${workspaceFolder}/tests",
         }
      }
   ]
}
```

### Task presentation groups
Thanks to a pull request from @cmfcmf, tasks now supports terminal presentation groups using split terminals. You can have tasks that split a task terminal panel instead of creating a new one. If you run both of the two tasks here they will show in a split terminal so you can see both of them at the same time:

![Split Terminal Tasks](images/1_31/sideBySideTasks.png)

````json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Task One",
            "type": "shell",
            "command": "echo One && sleep 5000",
            "problemMatcher": [],
            "presentation": {
                "group": "groupA"
            },
        },
        {
            "label": "Task Two",
            "type": "shell",
            "command": "echo Two && sleep 5000",
            "problemMatcher": [],
            "presentation": {
                "group": "groupA"
            }
        }
    ]
}
````

## Preview features

Preview features are not ready for release but are functional enough to use. We welcome your early feedback while they are under development.

### HTML and CSS custom data support

🚧 This feature is in preview and the settings, Contribution Points, and data formats are subject to change. 🚧

Today, front-end developers often code in a superset of HTML/CSS:

* WebComponent allows custom HTML elements such as `<my-button type="alert"></my-button>`.
* PostCSS allows custom CSS properties such as [`size`](https://github.com/postcss/postcss-size) and not-yet-standardized CSS features such as [`:any-link`](https://preset-env.cssdb.org/features#any-link-pseudo-class).
* Various frameworks allow even greater flexibility in the source HTML/CSS.

In this iteration, we improved the [HTML custom data support](https://code.visualstudio.com/updates/v1_30#_html-custom-tags-attributes-support) introduced in 1.30 and added CSS custom data support.

* Use `html.experimental.customData` or `css.experimental.customData` to load custom data. (`html.experimental.custom.tags` and `html.experimental.custom.attributes` are removed.)
* Alternatively, bundle the JSON into an extension with `contributes.html.experimental.customData` or `contributes.css.experimental.customData`.
* Finally, if you are writing a Language Server that uses [vscode-html-languageservice](https://github.com/Microsoft/vscode-html-languageservice) or [vscode-css-languageservice](https://github.com/Microsoft/vscode-css-languageservice), you can create the Language Service with custom data.

Custom data enhances VS Code's understanding of HTML/CSS. For example, with these HTML/CSS JSON contributions, VS Code could provide completion and hover for the custom HTML tag/attribute and CSS property/pseudoClass:

```json
{
  "version": 1,
  "tags": [{
      "name": "my-button",
      "description": "My button",
      "attributes": [{
        "name": "type",
        "description": "My button type",
        "values": [
          { "name": "alert" }
        ]
      }]
  }]
}
```

```json
{
  "version": 1,
  "properties": [{
    "name": "my-size",
    "description": "Compiles down to `width` and `height`. See details at https://github.com/postcss/postcss-size."
  }],
  "pseudoClasses": [{
    "name": ":my-link",
    "description": ":any-link pseudo class. See details at https://preset-env.cssdb.org/features#any-link-pseudo-class."
  }]
}
```

![custom data](images/1_31/customdata.gif)

The above sample is available at [octref/simple-customdata](https://github.com/octref/simple-customdata), while a more fully-featured sample is available at [octref/svg-data](https://github.com/octref/svg-data).

These guides explain the data format and how to use them through settings and extension Contribution Points.

* [Guide](https://github.com/Microsoft/vscode-html-languageservice/blob/master/docs/customData.md) for using HTML Custom Data
* [Guide](https://github.com/Microsoft/vscode-css-languageservice/blob/master/docs/customData.md) for using CSS Custom Data

## Extension authoring

### Octicons Updates
We've updated our version of Octicons to 8.3.0 :tada: and now support the following icons:

![octicons-update](images/1_31/octicons-updates.png?v=1)

- `$(arrow-both) `
- `$(bold) `
- `$(eye-closed) `
- `$(fold-down) `
- `$(fold-up) `
- `$(grabber) `
- `$(italic) `
- `$(kebab-horizontal) `
- `$(kebab-vertical) `
- `$(note) `
- `$(project) `
- `$(screen-full) `
- `$(screen-normal) `
- `$(smiley) `
- `$(tasklist) `
- `$(text-size) `
- `$(unverified) `
- `$(verified) `
- `$(color-mode) `
- `$(organization-filled) `
- `$(person-filled)`

You can [read our documentation]() to view a full list of the icons that we support. To view a list of the changes, please read the [Octicon changelog](https://github.com/primer/octicons/blob/master/CHANGELOG.md#830).

TO DO: add a link to website documentation with changes.

### Open Resources

A new function to open things has been added: `vscode.env.openExternal`. It expects a url and can be used to open website-links, mail-links, or application-url-handler. Also, file-urls are accepted which allows to open them in their default app, like a pdf-file.

```ts
// open defaut browser
await vscode.env.openExternal(vscode.Uri.parse("https://github.com/Microsoft/vscode/issues/66741"));
```

### CodeActionKind.intersects

The `CodeActionKind.intersects` method is useful to check if a `CodeActionProvider` should bother computing its Code Actions:

```typescript
import * as vscode from 'vscode';

export class OrganizeImportsProvider implements vscode.CodeActionProvider {
    public provideCodeActions(
        document: vscode.TextDocument,
        range: vscode.Range,
        context: vscode.CodeActionContext,
        token: vscode.CancellationToken
    ): vscode.CodeAction[] {
        // Only return organize imports actions if they were explicitly requested
        // We can check this using `intersects`.
        if (!context.only || !vscode.CodeActionKind.SourceOrganizeImports.intersects(context.only)) {
            // Organize imports organize imports actions were not requested
            return [];
        }

        // Organize imports was requested
        ...
    }
}
```

### contributes.resourceLabelFormatters

Extensions can now contribute resource label formatters that specify how to display URIs everywhere in the workbench. For example here's how an extension could contribute a formatter for URIs with scheme `remotehub`:
```json
"contributes": {
   "resourceLabelFormatters": [
        {
            "scheme": "remotehub",
            "formatting": {
                "label": "${path}",
                "separator": "/",
                "workspaceSuffix": "GitHub"
            }
        }
    ]
}
```
This means that all URIs that have a scheme `remotehub` will get rendered by showing only the `path` segment of the URI and the separator will be `/`. Workspaces which have the `remotehub` URI will have the GitHub suffix in their label.


### Node.js update

The version of Electron that VS Code runs on has been updated which brings with it an update to Node.js from `8.9` to `10.2.0`. All extensions will now run on this newer version of Node.js. Take a look at [Node v10.0.0 deprecations](https://nodejs.org/en/blog/release/v10.0.0/#deprecations) for a list of deprecations in Node.js 10.

### Add Arguments to Keybindings

When defining keybinding in `package.json` you can now define arguments. Upon execution those arguments are passed on to the command - in the sample below it is: `{foo: 1, bar: 2}`.

```json
"keybindings": {
  "key": "cmd+i",
  "command": "myCommand",
  "args": {
    "foo": 1,
    "bar": 2
  }
}
```

### Global Storage Path

An extension is now provided with a global storage path `ExtensionContext.globalStoragePath` that is pointing to a local directory with write/read access. This is a good option if you need to store large files that is accessible from all workspaces.

```ts
/**
 * An absolute file path in which the extension can store global state.
 * The directory might not exist on disk and creation is
 * up to the extension. However, the parent directory is guaranteed to be existent.
 *
 * Use [`globalState`](#ExtensionContext.globalState) to store key value data.
 */
globalStoragePath: string;
```

VS Code takes care of cleaning up this path when the extension is removed.

### Full control over createTerminal environment

The new setting `TerminalOptions.strictEnv` when set to true will not make any modifications to the terminal environment at all, instead it will be used exactly as passed in by the extension.

```ts
// This will create a terminal whose environment only contains the single value
// FOO=BAR.
const terminal = createTerminal({
  name: "Test terminal",
  env: {
    "FOO": "BAR"
  }
});
```

## Proposed extension APIs

Every milestone comes with new proposed APIs and extension authors can try them out. As always we are keen on your feedback. This is what you have to do to try out a proposed API:

* You must use Insiders because proposed APIs change frequently.
* You must have this line in the `package.json` file of your extension: `"enableProposedApi": true`.
* Copy the latest version of the [`vscode.proposed.d.ts`](https://github.com/Microsoft/vscode/blob/master/src/vs/vscode.proposed.d.ts) file into your project.

Note that you cannot publish an extension that uses a proposed API. We may likely make breaking changes in the next release and we never want to break existing extensions.

### `SignatureHelpContext.activeSignatureHelp`

The proposed `SignatureHelpContext.activeSignatureHelp` field tracks the previously active signature:

```typescript
import * as vscode from 'vscode';

class MySignatureHelpProvider implements vscode.SignatureHelpProvider {
    provideSignatureHelp(
        document: vscode.TextDocument,
        position: vscode.Position,
        token: vscode.CancellationToken,
        context: vscode.SignatureHelpContext
    ): vscode.ProviderResult<vscode.SignatureHelp> {
        // The active signature help when this provider was triggered or undefined if
        // no signature help was active.
        console.log(context.activeSignatureHelp);

        ...
    }
}
```

Providers can use this to track which overload was selected before the signature help provider was retriggered.

### Auto fix and `CodeAction.isPreferred`

The Code Action API powers VS Code's Quick Fixes (the lightbulbs you see in the editor). Although there may be many Quick Fixes for a given error, often one of these Quick Fixes is the most reasonable fix for the problem. For example, fixing a spelling error is usually the more likely fix than generating new fields:

![The fix spelling quick fix is usually more reasonable than generating properties](images/1_31/api-preferred.png)

By using the proposed API, extensions can set `isPreferred` on a `CodeAction` to indicate that is the most reasonable fix for the underlying problem. Preferred fixes can be automatically applied using the **Auto Fix** command (`kb(editor.action.autoFix)`)

![After applying an auto fix to the error](images/1_31/api-preferred-after.png)

Preferred Quick Fixes should generally:

* Correctly fix the underlying error (and not suppress it).
* Be a reasonable fix for the error.
* Not perform extensive operations unexpectedly.

Refactoring Code Actions can also be marked as preferred to indicate that they are the most reasonable refactoring. For example, while multiple **Extract constant** refactorings may be available, often the user just wants to extract to the nearest local. If that refactoring Code Action is marked `isPreferred`, users can set up a single keybinding for it:

```json
{
  "key": "ctrl+shift+r ctrl+e",
  "command": "editor.action.codeAction",
  "args": {
    "kind": "refactor.extract.constant",
    "apply": "preferred"
  }
}
```

### Fix All Source Actions

The proposed `source.fixAll` `CodeActionKind` establishes a convention for extensions that can auto fix errors in a file. This new Source Action kind is similar to **Organize imports** and makes it easy to configure keybindings for fix all actions or enable autofix on save:

```json
// On save, run both fixAll and organizeImports source actions
"editor.codeActionsOnSave": {
    "source.fixAll": true,
    "source.organizeImports": true,
}
```

The [TS Lint extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-tslint-plugin) already uses this proposed source Code Action kind to implement fix all and auto fix on save.

### Debug Adapter Protocol

**Proposed Debug Adapter Protocol for data breakpoints**

As a follow-up step for the [ongoing work on data breakpoints](https://github.com/Microsoft/vscode/issues/58304) (AKA "watchpoints"), we made some progress on the design of the Debug Adapter Protocol for data breakpoints. The proposed DAP changes live on this [branch](https://github.com/Microsoft/debug-adapter-protocol/tree/aweinand/data-breakpoints) and the corresponding TypeScript API can be found [here](https://github.com/Microsoft/debug-adapter-protocol/issues/20#issue-384366398).

If you are interested in supporting data breakpoints in your debugger extension, please have a look at the [proposal](https://github.com/Microsoft/debug-adapter-protocol/issues/20) and provide feedback.

## Engineering

### Electron 3.0 update and Electron 4.0 exploration

In this milestone, we finished the exploration of bundling Electron 3 into VS Code, making it the first time we ship this Electron version to stable. This is a major Electron release and comes with Chrome 66 and Node.js 10.x (a major leap forward compared to our current version that has Chrome 61 and Node.js 8.x).

At the same time, we started to explore updating to Electron 4, which we hope to push to Insiders soon.

### Better Performance Information

With this relase the "F1 > Developer: Startup Performance" information is presented in the editor, not in dev tools anymore. That makes it easier to read and faster to get to. Also, along the way many issues have been fixed.

## New documentation

### Updated Extension API documentation

For extension authors, the VS Code [API](https://code.visualstudio.com/api) documentation was rewritten and moved to its own table of contents.

![API TOC on code.visualstudio.com](images/1_31/API-TOC.png)

Here you'll find articles to:

* Get you started with your [first extension](https://code.visualstudio.com/api/get-started/your-first-extension).
* Learn about various extension [capabilities](https://code.visualstudio.com/api/extension-capabilities/overview).
* Find extension [guides](https://code.visualstudio.com/api/extension-guides/overview) and [advanced topics](https://code.visualstudio.com/api/advanced-topics/extension-host).
* Complete API [references](https://code.visualstudio.com/api/references/vscode-api).

### Python Jupyter Notebooks

A new [Working with Jupyter Notebooks](https://code.visualstudio.com/docs/python/jupyter-support) topic describes how to open, debug, and export [Jupyter Notebooks](https://jupyter-notebook.readthedocs.io/en/latest/) from within VS Code.

## Notable fixes

* [7570](https://github.com/Microsoft/vscode/issues/7570): VS Code does not open offline
* [34396](https://github.com/Microsoft/vscode/issues/34396): High CPU on single CPU VM
* [14372](https://github.com/Microsoft/vscode/issues/14372): Extensions: disablement state needs to be communicated across windows
* [58167](https://github.com/Microsoft/vscode/issues/58167]: Terminal and minimap restore textures are corrupted after resuming the OS
* [59794](https://github.com/Microsoft/vscode/issues/59794): Terminal screen reader support doesn't work when editor.accessibilitySupport is set to 'auto'
* [66302](https://github.com/Microsoft/vscode/issues/66302): Ctrl + L should be bound to clear repl by default
* [66681](https://github.com/Microsoft/vscode/issues/66681): "Select for compare" and "Compare with selected" commands not shown for virtual documents

## Thank you

Last but certainly not least, a big *__Thank You!__* to the following folks that helped to make VS Code even better:

Contributions to our issue tracking:

Contributions to `vscode-eslint`:

* [Jonathan T L Lee (@Lee182)](https://github.com/Lee182): Issue 529, Added support for pnpm [PR #572](https://github.com/Microsoft/vscode-eslint/pull/572)
* [Loune Lam (@loune)](https://github.com/loune): disable-eslint fixes and improvements [PR #588](https://github.com/Microsoft/vscode-eslint/pull/588/)

Contributions to `language-server-protocol`:

* [Laurent Tréguier (@LaurentTreguier)](https://github.com/LaurentTreguier): Remove duplicated label property [PR #638](https://github.com/Microsoft/language-server-protocol/pull/638)
* [Jason Axelson (@axelson)](https://github.com/axelson): Fix changelog link [PR #654](https://github.com/Microsoft/language-server-protocol/pull/654)

Contributions to `vscode-languageserver-node`:

* [Daniel McNab (@DJMcNab)](https://github.com/DJMcNab):
  * Support MarkupContent[] in a Hover [PR #417](https://github.com/Microsoft/vscode-languageserver-node/pull/417)
  * Support using a separate output channel for trace messages [PR #444](https://github.com/Microsoft/vscode-languageserver-node/pull/444)
* [Felix Becker (@felixfbecker)](https://github.com/felixfbecker): Add repository.directory field to package.json [PR #439](https://github.com/Microsoft/vscode-languageserver-node/pull/439)
* [Laurent Tréguier (@LaurentTreguier)](https://github.com/LaurentTreguier): Fix configuration not always using resource scope [PR #446](https://github.com/Microsoft/vscode-languageserver-node/pull/446)
* [Aleksey Kladov (@matklad)](https://github.com/matklad): mention `npm run symlink` in the readme [PR #452](https://github.com/Microsoft/vscode-languageserver-node/pull/452)

Contributions to `debug-adapter-protocol`:

* [Ben Jackson (@puremourning)](https://github.com/puremourning): Add vimspector to implementations list [PR #21](https://github.com/Microsoft/debug-adapter-protocol/pull/21)
* [Sean Allred (@vermiculus)](https://github.com/vermiculus): Correct various typos in overview [PR #22](https://github.com/Microsoft/debug-adapter-protocol/pull/22)

<!-- In-product release notes styles.  Do not modify without also modifying regex in gulpfile.common.js -->
<a id="scroll-to-top" role="button" aria-label="scroll to top" href="#"><span class="icon"></span></a>
<link rel="stylesheet" type="text/css" href="css/inproduct_releasenotes.css"/>
